(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var X,v,ze,T,Pe,Ye,Je,Xe,Ne,de,ue,Ge,Y={},Ze=[],yt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,G=Array.isArray;function A(e,t){for(var r in t)e[r]=t[r];return e}function ke(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ie(e,t,r){var n,i,o,c={};for(o in t)o=="key"?n=t[o]:o=="ref"?i=t[o]:c[o]=t[o];if(arguments.length>2&&(c.children=arguments.length>3?X.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)c[o]===void 0&&(c[o]=e.defaultProps[o]);return Q(e,c,n,i,null)}function Q(e,t,r,n,i){var o={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++ze,__i:-1,__u:0};return i==null&&v.vnode!=null&&v.vnode(o),o}function ie(e){return e.children}function z(e,t){this.props=e,this.context=t}function F(e,t){if(t==null)return e.__?F(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?F(e):null}function et(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return et(e)}}function he(e){(!e.__d&&(e.__d=!0)&&T.push(e)&&!re.__r++||Pe!=v.debounceRendering)&&((Pe=v.debounceRendering)||Ye)(re)}function re(){for(var e,t,r,n,i,o,c,d=1;T.length;)T.length>d&&T.sort(Je),e=T.shift(),d=T.length,e.__d&&(r=void 0,n=void 0,i=(n=(t=e).__v).__e,o=[],c=[],t.__P&&((r=A({},n)).__v=n.__v+1,v.vnode&&v.vnode(r),De(t.__P,r,n,t.__n,t.__P.namespaceURI,32&n.__u?[i]:null,o,i??F(n),!!(32&n.__u),c),r.__v=n.__v,r.__.__k[r.__i]=r,nt(o,r,c),n.__e=n.__=null,r.__e!=i&&et(r)));re.__r=0}function tt(e,t,r,n,i,o,c,d,u,s,h){var l,m,_,x,S,w,y,p=n&&n.__k||Ze,$=t.length;for(u=gt(r,t,p,u,$),l=0;l<$;l++)(_=r.__k[l])!=null&&(m=_.__i==-1?Y:p[_.__i]||Y,_.__i=l,w=De(e,_,m,i,o,c,d,u,s,h),x=_.__e,_.ref&&m.ref!=_.ref&&(m.ref&&Se(m.ref,null,_),h.push(_.ref,_.__c||x,_)),S==null&&x!=null&&(S=x),(y=!!(4&_.__u))||m.__k===_.__k?u=rt(_,u,e,y):typeof _.type=="function"&&w!==void 0?u=w:x&&(u=x.nextSibling),_.__u&=-7);return r.__e=S,u}function gt(e,t,r,n,i){var o,c,d,u,s,h=r.length,l=h,m=0;for(e.__k=new Array(i),o=0;o<i;o++)(c=t[o])!=null&&typeof c!="boolean"&&typeof c!="function"?(u=o+m,(c=e.__k[o]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?Q(null,c,null,null,null):G(c)?Q(ie,{children:c},null,null,null):c.constructor==null&&c.__b>0?Q(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,d=null,(s=c.__i=bt(c,r,u,l))!=-1&&(l--,(d=r[s])&&(d.__u|=2)),d==null||d.__v==null?(s==-1&&(i>h?m--:i<h&&m++),typeof c.type!="function"&&(c.__u|=4)):s!=u&&(s==u-1?m--:s==u+1?m++:(s>u?m--:m++,c.__u|=4))):e.__k[o]=null;if(l)for(o=0;o<h;o++)(d=r[o])!=null&&(2&d.__u)==0&&(d.__e==n&&(n=F(d)),it(d,d));return n}function rt(e,t,r,n){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=rt(i[o],t,r,n));return t}e.__e!=t&&(n&&(t&&e.type&&!t.parentNode&&(t=F(e)),r.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function _e(e,t){return t=t||[],e==null||typeof e=="boolean"||(G(e)?e.some(function(r){_e(r,t)}):t.push(e)),t}function bt(e,t,r,n){var i,o,c,d=e.key,u=e.type,s=t[r],h=s!=null&&(2&s.__u)==0;if(s===null&&e.key==null||h&&d==s.key&&u==s.type)return r;if(n>(h?1:0)){for(i=r-1,o=r+1;i>=0||o<t.length;)if((s=t[c=i>=0?i--:o++])!=null&&(2&s.__u)==0&&d==s.key&&u==s.type)return c}return-1}function Ee(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||yt.test(t)?r:r+"px"}function ee(e,t,r,n,i){var o,c;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||Ee(e.style,t,"");if(r)for(t in r)n&&r[t]==n[t]||Ee(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(Xe,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=r,r?n?r.u=n.u:(r.u=Ne,e.addEventListener(t,o?ue:de,o)):e.removeEventListener(t,o?ue:de,o);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function Me(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=Ne++;else if(t.t<r.u)return;return r(v.event?v.event(t):t)}}}function De(e,t,r,n,i,o,c,d,u,s){var h,l,m,_,x,S,w,y,p,$,M,H,R,q,O,L,K,f=t.type;if(t.constructor!=null)return null;128&r.__u&&(u=!!(32&r.__u),o=[d=t.__e=r.__e]),(h=v.__b)&&h(t);e:if(typeof f=="function")try{if(y=t.props,p="prototype"in f&&f.prototype.render,$=(h=f.contextType)&&n[h.__c],M=h?$?$.props.value:h.__:n,r.__c?w=(l=t.__c=r.__c).__=l.__E:(p?t.__c=l=new f(y,M):(t.__c=l=new z(y,M),l.constructor=f,l.render=xt),$&&$.sub(l),l.props=y,l.state||(l.state={}),l.context=M,l.__n=n,m=l.__d=!0,l.__h=[],l._sb=[]),p&&l.__s==null&&(l.__s=l.state),p&&f.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=A({},l.__s)),A(l.__s,f.getDerivedStateFromProps(y,l.__s))),_=l.props,x=l.state,l.__v=t,m)p&&f.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),p&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(p&&f.getDerivedStateFromProps==null&&y!==_&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,M),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,M)===!1||t.__v==r.__v){for(t.__v!=r.__v&&(l.props=y,l.state=l.__s,l.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(g){g&&(g.__=t)}),H=0;H<l._sb.length;H++)l.__h.push(l._sb[H]);l._sb=[],l.__h.length&&c.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,M),p&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(_,x,S)})}if(l.context=M,l.props=y,l.__P=e,l.__e=!1,R=v.__r,q=0,p){for(l.state=l.__s,l.__d=!1,R&&R(t),h=l.render(l.props,l.state,l.context),O=0;O<l._sb.length;O++)l.__h.push(l._sb[O]);l._sb=[]}else do l.__d=!1,R&&R(t),h=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++q<25);l.state=l.__s,l.getChildContext!=null&&(n=A(A({},n),l.getChildContext())),p&&!m&&l.getSnapshotBeforeUpdate!=null&&(S=l.getSnapshotBeforeUpdate(_,x)),L=h,h!=null&&h.type===ie&&h.key==null&&(L=ot(h.props.children)),d=tt(e,G(L)?L:[L],t,r,n,i,o,c,d,u,s),l.base=t.__e,t.__u&=-161,l.__h.length&&c.push(l),w&&(l.__E=l.__=null)}catch(g){if(t.__v=null,u||o!=null)if(g.then){for(t.__u|=u?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;o[o.indexOf(d)]=null,t.__e=d}else{for(K=o.length;K--;)ke(o[K]);fe(t)}else t.__e=r.__e,t.__k=r.__k,g.then||fe(t);v.__e(g,t,r)}else o==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):d=t.__e=vt(r.__e,t,r,n,i,o,c,u,s);return(h=v.diffed)&&h(t),128&t.__u?void 0:d}function fe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(fe)}function nt(e,t,r){for(var n=0;n<r.length;n++)Se(r[n],r[++n],r[++n]);v.__c&&v.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){v.__e(o,i.__v)}})}function ot(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:G(e)?e.map(ot):A({},e)}function vt(e,t,r,n,i,o,c,d,u){var s,h,l,m,_,x,S,w=r.props,y=t.props,p=t.type;if(p=="svg"?i="http://www.w3.org/2000/svg":p=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(s=0;s<o.length;s++)if((_=o[s])&&"setAttribute"in _==!!p&&(p?_.localName==p:_.nodeType==3)){e=_,o[s]=null;break}}if(e==null){if(p==null)return document.createTextNode(y);e=document.createElementNS(i,p,y.is&&y),d&&(v.__m&&v.__m(t,o),d=!1),o=null}if(p==null)w===y||d&&e.data==y||(e.data=y);else{if(o=o&&X.call(e.childNodes),w=r.props||Y,!d&&o!=null)for(w={},s=0;s<e.attributes.length;s++)w[(_=e.attributes[s]).name]=_.value;for(s in w)if(_=w[s],s!="children"){if(s=="dangerouslySetInnerHTML")l=_;else if(!(s in y)){if(s=="value"&&"defaultValue"in y||s=="checked"&&"defaultChecked"in y)continue;ee(e,s,null,_,i)}}for(s in y)_=y[s],s=="children"?m=_:s=="dangerouslySetInnerHTML"?h=_:s=="value"?x=_:s=="checked"?S=_:d&&typeof _!="function"||w[s]===_||ee(e,s,_,w[s],i);if(h)d||l&&(h.__html==l.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(l&&(e.innerHTML=""),tt(t.type=="template"?e.content:e,G(m)?m:[m],t,r,n,p=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,c,o?o[0]:r.__k&&F(r,0),d,u),o!=null)for(s=o.length;s--;)ke(o[s]);d||(s="value",p=="progress"&&x==null?e.removeAttribute("value"):x!=null&&(x!==e[s]||p=="progress"&&!x||p=="option"&&x!=w[s])&&ee(e,s,x,w[s],i),s="checked",S!=null&&S!=e[s]&&ee(e,s,S,w[s],i))}return e}function Se(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(i){v.__e(i,r)}}function it(e,t,r){var n,i;if(v.unmount&&v.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||Se(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){v.__e(o,t)}n.base=n.__P=null}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&it(n[i],t,r||typeof e.type!="function");r||ke(e.__e),e.__c=e.__=e.__e=void 0}function xt(e,t,r){return this.constructor(e,r)}function wt(e,t,r){var n,i,o,c;t==document&&(t=document.documentElement),v.__&&v.__(e,t),i=(n=!1)?null:t.__k,o=[],c=[],De(t,e=t.__k=Ie(ie,null,[e]),i||Y,Y,t.namespaceURI,i?null:t.firstChild?X.call(t.childNodes):null,o,i?i.__e:t.firstChild,n,c),nt(o,e,c)}function Nt(e,t,r){var n,i,o,c,d=A({},e.props);for(o in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)o=="key"?n=t[o]:o=="ref"?i=t[o]:d[o]=t[o]===void 0&&c!=null?c[o]:t[o];return arguments.length>2&&(d.children=arguments.length>3?X.call(arguments,2):r),Q(e.type,d,n||e.key,i||e.ref,null)}function kt(e){function t(r){var n,i;return this.getChildContext||(n=new Set,(i={})[t.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&n.forEach(function(c){c.__e=!0,he(c)})},this.sub=function(o){n.add(o);var c=o.componentWillUnmount;o.componentWillUnmount=function(){n&&n.delete(o),c&&c.call(o)}}),r.children}return t.__c="__cC"+Ge++,t.__=e,t.Provider=t.__l=(t.Consumer=function(r,n){return r.children(n)}).contextType=t,t}X=Ze.slice,v={__e:function(e,t,r,n){for(var i,o,c;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),c=i.__d),c)return i.__E=i}catch(d){e=d}throw e}},ze=0,z.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=A({},this.state),typeof e=="function"&&(e=e(A({},r),this.props)),e&&A(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),he(this))},z.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),he(this))},z.prototype.render=ie,T=[],Ye=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Je=function(e,t){return e.__v.__b-t.__v.__b},re.__r=0,Xe=/(PointerCapture)$|Capture$/i,Ne=0,de=Me(!1),ue=Me(!0),Ge=0;var It=0;function a(e,t,r,n,i,o){t||(t={});var c,d,u=t;if("ref"in u)for(d in u={},t)d=="ref"?c=t[d]:u[d]=t[d];var s={type:e,props:u,key:r,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--It,__i:-1,__u:0,__source:i,__self:o};if(typeof e=="function"&&(c=e.defaultProps))for(d in c)u[d]===void 0&&(u[d]=c[d]);return v.vnode&&v.vnode(s),s}var J,k,se,Ae,ne=0,at=[],I=v,Re=I.__b,Le=I.__r,We=I.diffed,Te=I.__c,Ue=I.unmount,je=I.__;function Ce(e,t){I.__h&&I.__h(k,e,ne||t),ne=0;var r=k.__H||(k.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function C(e){return ne=1,Dt(lt,e)}function Dt(e,t,r){var n=Ce(J++,2);if(n.t=e,!n.__c&&(n.__=[lt(void 0,t),function(d){var u=n.__N?n.__N[0]:n.__[0],s=n.t(u,d);u!==s&&(n.__N=[s,n.__[1]],n.__c.setState({}))}],n.__c=k,!k.__f)){var i=function(d,u,s){if(!n.__c.__H)return!0;var h=n.__c.__H.__.filter(function(m){return!!m.__c});if(h.every(function(m){return!m.__N}))return!o||o.call(this,d,u,s);var l=n.__c.props!==d;return h.forEach(function(m){if(m.__N){var _=m.__[0];m.__=m.__N,m.__N=void 0,_!==m.__[0]&&(l=!0)}}),o&&o.call(this,d,u,s)||l};k.__f=!0;var o=k.shouldComponentUpdate,c=k.componentWillUpdate;k.componentWillUpdate=function(d,u,s){if(this.__e){var h=o;o=void 0,i(d,u,s),o=h}c&&c.call(this,d,u,s)},k.shouldComponentUpdate=i}return n.__N||n.__}function Z(e,t){var r=Ce(J++,3);!I.__s&&st(r.__H,t)&&(r.__=e,r.u=t,k.__H.__h.push(r))}function me(e){return ne=5,St(function(){return{current:e}},[])}function St(e,t){var r=Ce(J++,7);return st(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function Ct(){for(var e;e=at.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(te),e.__H.__h.forEach(pe),e.__H.__h=[]}catch(t){e.__H.__h=[],I.__e(t,e.__v)}}I.__b=function(e){k=null,Re&&Re(e)},I.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),je&&je(e,t)},I.__r=function(e){Le&&Le(e),J=0;var t=(k=e.__c).__H;t&&(se===k?(t.__h=[],k.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(te),t.__h.forEach(pe),t.__h=[],J=0)),se=k},I.diffed=function(e){We&&We(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(at.push(t)!==1&&Ae===I.requestAnimationFrame||((Ae=I.requestAnimationFrame)||$t)(Ct)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),se=k=null},I.__c=function(e,t){t.some(function(r){try{r.__h.forEach(te),r.__h=r.__h.filter(function(n){return!n.__||pe(n)})}catch(n){t.some(function(i){i.__h&&(i.__h=[])}),t=[],I.__e(n,r.__v)}}),Te&&Te(e,t)},I.unmount=function(e){Ue&&Ue(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{te(n)}catch(i){t=i}}),r.__H=void 0,t&&I.__e(t,r.__v))};var Be=typeof requestAnimationFrame=="function";function $t(e){var t,r=function(){clearTimeout(n),Be&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,35);Be&&(t=requestAnimationFrame(r))}function te(e){var t=k,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),k=t}function pe(e){var t=k;e.__c=e.__(),k=t}function st(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function lt(e,t){return typeof t=="function"?t(e):t}var Pt={};function V(e,t){for(var r in t)e[r]=t[r];return e}function Et(e,t,r){var n,i=/(?:\?([^#]*))?(#.*)?$/,o=e.match(i),c={};if(o&&o[1])for(var d=o[1].split("&"),u=0;u<d.length;u++){var s=d[u].split("=");c[decodeURIComponent(s[0])]=decodeURIComponent(s.slice(1).join("="))}e=ye(e.replace(i,"")),t=ye(t||"");for(var h=Math.max(e.length,t.length),l=0;l<h;l++)if(t[l]&&t[l].charAt(0)===":"){var m=t[l].replace(/(^:|[+*?]+$)/g,""),_=(t[l].match(/[+*?]+$/)||Pt)[0]||"",x=~_.indexOf("+"),S=~_.indexOf("*"),w=e[l]||"";if(!w&&!S&&(_.indexOf("?")<0||x)){n=!1;break}if(c[m]=decodeURIComponent(w),x||S){c[m]=e.slice(l).map(decodeURIComponent).join("/");break}}else if(t[l]!==e[l]){n=!1;break}return(r.default===!0||n!==!1)&&c}function Mt(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function At(e,t){return e.index=t,e.rank=(function(r){return r.props.default?0:ye(r.props.path).map(Rt).join("")})(e),e.props}function ye(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Rt(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Lt={},U=[],He=[],P=null,ct={url:$e()},Wt=kt(ct);function $e(){var e;return""+((e=P&&P.location?P.location:P&&P.getCurrentLocation?P.getCurrentLocation():typeof location<"u"?location:Lt).pathname||"")+(e.search||"")}function Tt(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),(function(r){for(var n=U.length;n--;)if(U[n].canRoute(r))return!0;return!1})(e)&&(function(r,n){n===void 0&&(n="push"),P&&P[n]?P[n](r):typeof history<"u"&&history[n+"State"]&&history[n+"State"](null,null,r)})(e,t?"replace":"push"),dt(e)}function dt(e){for(var t=!1,r=0;r<U.length;r++)U[r].routeTo(e)&&(t=!0);return t}function Ut(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),r=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!r||r.match(/^_?self$/i)))return Tt(t)}}function jt(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function ut(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Ut(t))return jt(e)}while(t=t.parentNode)}}var Oe=!1;function ht(e){e.history&&(P=e.history),this.state={url:e.url||$e()}}V(ht.prototype=new z,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=_e(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Oe||(Oe=!0,P||addEventListener("popstate",function(){dt($e())}),addEventListener("click",ut)),U.push(this),P&&(this.u=P.listen(function(t){var r=t.location||t;e.routeTo(""+(r.pathname||"")+(r.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),U.splice(U.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(At).sort(Mt);for(var r=0;r<e.length;r++){var n=e[r],i=Et(t,n.props.path,n.props);if(i)return[n,i]}},render:function(e,t){var r,n,i=e.onChange,o=t.url,c=this.c,d=this.g(_e(e.children),o);if(d&&(n=Nt(d[0],V(V({url:o,matches:r=d[1]},r),{key:void 0,ref:void 0}))),o!==(c&&c.url)){V(ct,c=this.c={url:o,previous:c&&c.url,current:n,path:n?n.props.path:null,matches:r}),c.router=this,c.active=n?[n]:[];for(var u=He.length;u--;)He[u]({});typeof i=="function"&&i(c)}return Ie(Wt.Provider,{value:c},n)}});var j=function(e){return Ie("a",V({onClick:ut},e))};const ge=(e,t)=>t.some(r=>e instanceof r);let Fe,qe;function Bt(){return Fe||(Fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ht(){return qe||(qe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const be=new WeakMap,le=new WeakMap,ae=new WeakMap;function Ot(e){const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",c)},o=()=>{r(B(e.result)),i()},c=()=>{n(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",c)});return ae.set(t,e),t}function Ft(e){if(be.has(e))return;const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",c),e.removeEventListener("abort",c)},o=()=>{r(),i()},c=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",c),e.addEventListener("abort",c)});be.set(e,t)}let ve={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return be.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return B(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function _t(e){ve=e(ve)}function qt(e){return Ht().includes(e)?function(...t){return e.apply(xe(this),t),B(this.request)}:function(...t){return B(e.apply(xe(this),t))}}function Kt(e){return typeof e=="function"?qt(e):(e instanceof IDBTransaction&&Ft(e),ge(e,Bt())?new Proxy(e,ve):e)}function B(e){if(e instanceof IDBRequest)return Ot(e);if(le.has(e))return le.get(e);const t=Kt(e);return t!==e&&(le.set(e,t),ae.set(t,e)),t}const xe=e=>ae.get(e);function Vt(e,t,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const c=indexedDB.open(e,t),d=B(c);return n&&c.addEventListener("upgradeneeded",u=>{n(B(c.result),u.oldVersion,u.newVersion,B(c.transaction),u)}),r&&c.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),d.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",s=>i(s.oldVersion,s.newVersion,s))}).catch(()=>{}),d}const Qt=["get","getKey","getAll","getAllKeys","count"],zt=["put","add","delete","clear"],ce=new Map;function Ke(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ce.get(t))return ce.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=zt.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Qt.includes(r)))return;const o=async function(c,...d){const u=this.transaction(c,i?"readwrite":"readonly");let s=u.store;return n&&(s=s.index(d.shift())),(await Promise.all([s[r](...d),i&&u.done]))[0]};return ce.set(t,o),o}_t(e=>({...e,get:(t,r,n)=>Ke(t,r)||e.get(t,r,n),has:(t,r)=>!!Ke(t,r)||e.has(t,r)}));const Yt=["continue","continuePrimaryKey","advance"],Ve={},we=new WeakMap,ft=new WeakMap,Jt={get(e,t){if(!Yt.includes(t))return e[t];let r=Ve[t];return r||(r=Ve[t]=function(...n){we.set(this,ft.get(this)[t](...n))}),r}};async function*Xt(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,Jt);for(ft.set(r,t),ae.set(r,xe(t));t;)yield r,t=await(we.get(r)||t.continue()),we.delete(r)}function Qe(e,t){return t===Symbol.asyncIterator&&ge(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&ge(e,[IDBIndex,IDBObjectStore])}_t(e=>({...e,get(t,r,n){return Qe(t,r)?Xt:e.get(t,r,n)},has(t,r){return Qe(t,r)||e.has(t,r)}}));const Gt="WelderTracker",Zt=1;class er{constructor(){this.db=null}async init(){this.db=await Vt(Gt,Zt,{upgrade(t,r,n,i){if(t.objectStoreNames.contains("welders")||t.createObjectStore("welders",{keyPath:"id",autoIncrement:!0}).createIndex("name","name",{unique:!0}),!t.objectStoreNames.contains("records")){const o=t.createObjectStore("records",{keyPath:"id",autoIncrement:!0});o.createIndex("welderId","welderId",{unique:!1}),o.createIndex("article","article",{unique:!1}),o.createIndex("date","date",{unique:!1})}if(t.objectStoreNames.contains("norms")||t.createObjectStore("norms",{keyPath:"id",autoIncrement:!0}).createIndex("article","article",{unique:!0}),!t.objectStoreNames.contains("history")){const o=t.createObjectStore("history",{keyPath:"id",autoIncrement:!0});o.createIndex("recordId","recordId",{unique:!1}),o.createIndex("date","date",{unique:!1})}}})}async addWelder(t){return this.db||await this.init(),this.db.add("welders",{name:t,createdAt:new Date})}async getAllWelders(){return this.db||await this.init(),this.db.getAll("welders")}async getWelder(t){return this.db||await this.init(),this.db.get("welders",t)}async addRecord(t,r,n){this.db||await this.init();const i=new Date;return this.db.add("records",{welderId:t,article:r,quantity:n,date:i})}async getRecordsByWelder(t){return this.db||await this.init(),this.db.getAllFromIndex("records","welderId",t)}async updateRecord(t,r){this.db||await this.init();const n=await this.db.get("records",t);return n.quantity=r,n.date=new Date,this.db.put("records",n)}async addNorm(t){return this.db||await this.init(),this.db.add("norms",{article:t})}async getAllNorms(){return this.db||await this.init(),this.db.getAll("norms")}async getNormByArticle(t){return this.db||await this.init(),this.db.getFromIndex("norms","article",t)}async addHistoryRecord(t,r,n){return this.db||await this.init(),this.db.add("history",{recordId:t,oldQuantity:r,newQuantity:n,date:new Date})}async getHistoryByRecord(t){return this.db||await this.init(),this.db.getAllFromIndex("history","recordId",t)}async getAllRecords(){return this.db||await this.init(),this.db.getAll("records")}async getAllHistory(){return this.db||await this.init(),this.db.getAll("history")}async clearWelders(){return this.db||await this.init(),this.db.clear("welders")}async clearRecords(){return this.db||await this.init(),this.db.clear("records")}async clearNorms(){return this.db||await this.init(),this.db.clear("norms")}async clearHistory(){return this.db||await this.init(),this.db.clear("history")}}const D=new er,tr=async()=>{try{const e=await D.getAllWelders(),t=await D.getAllNorms();let r=[],n=[];for(const s of e){const h=await D.getRecordsByWelder(s.id);r=[...r,...h];for(const l of h){const m=await D.getHistoryByRecord(l.id);n=[...n,...m]}}const i={version:"1.0",exportDate:new Date().toISOString(),data:{welders:e,records:r,norms:t,history:n}},o=JSON.stringify(i,null,2),c=new Blob([o],{type:"application/json"}),d=URL.createObjectURL(c),u=document.createElement("a");return u.href=d,u.download=`welder-tracker-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d),!0}catch(e){return console.error("Ошибка при экспорте данных:",e),alert("Ошибка при экспорте данных"),!1}},rr=async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=async i=>{try{const o=JSON.parse(i.target.result);if(!o.version||!o.data)throw new Error("Неверный формат файла");if(o.data.welders)for(const c of o.data.welders)try{await D.addWelder(c.name)}catch(d){d.message.includes("unique")||console.error("Ошибка добавления сварщика:",d)}if(o.data.norms)for(const c of o.data.norms)try{await D.addNorm(c.article)}catch(d){d.message.includes("unique")||console.error("Ошибка добавления нормы:",d)}alert("Данные успешно импортированы!"),t(!0)}catch(o){console.error("Ошибка при импорте данных:",o),r(o)}},n.onerror=()=>r(n.error),n.readAsText(e)}),nr=({onClose:e})=>{const t=me(null);return a("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:a("div",{className:"bg-gray-800 rounded-2xl max-w-md w-full border border-gray-700",children:[a("div",{className:"p-6 border-b border-gray-700",children:a("div",{className:"flex justify-between items-center",children:[a("h3",{className:"text-lg font-semibold text-white",children:"Импорт/Экспорт данных"}),a("button",{onClick:e,className:"text-gray-400 hover:text-white",children:"✕"})]})}),a("div",{className:"p-6 space-y-4",children:[a("div",{children:[a("h4",{className:"font-medium text-white mb-2",children:"Экспорт данных"}),a("p",{className:"text-sm text-gray-300 mb-3",children:"Скачайте резервную копию всех данных в JSON-файл"}),a("button",{onClick:async()=>{await tr()&&e()},className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"📥 Экспорт данных"})]}),a("div",{className:"border-t border-gray-700 pt-4",children:[a("h4",{className:"font-medium text-white mb-2",children:"Импорт данных"}),a("p",{className:"text-sm text-gray-300 mb-3",children:"Загрузите JSON-файл с данными для восстановления"}),a("button",{onClick:()=>{t.current?.click()},className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"📤 Импорт данных"}),a("input",{type:"file",ref:t,accept:".json",onChange:async o=>{const c=o.target.files?.[0];if(c){try{await rr(c),e(),setTimeout(()=>window.location.reload(),1e3)}catch(d){alert(`Ошибка импорта: ${d.message}`)}o.target.value=""}},className:"hidden"})]})]}),a("div",{className:"p-4 bg-gray-700 border-t border-gray-600",children:a("p",{className:"text-xs text-gray-400",children:"💡 Рекомендуется регулярно создавать резервные копии данных"})})]})})};function or(){const[e,t]=C([]),[r,n]=C(""),[i,o]=C(!1);Z(()=>{c()},[]);const c=async()=>{try{const s=await D.getAllWelders();t(s)}catch(s){console.error("Ошибка загрузки сварщиков:",s)}},d=async()=>{if(r.trim()!=="")try{await D.addWelder(r.trim()),n(""),await c()}catch(s){console.error("Ошибка добавления сварщика:",s),alert("Ошибка при добавлении сварщика")}};return a("div",{className:"min-h-screen flex flex-col bg-gray-900 font-sans",children:[a("div",{className:"fixed top-0 left-0 right-0 bg-gray-800/95 backdrop-blur-lg shadow-md z-50 border-b border-gray-700 px-4 py-3",children:a("div",{className:"max-w-6xl mx-auto flex gap-3 items-center",children:[a("input",{type:"text",value:r,onInput:s=>n(s.target.value),onKeyPress:s=>{s.key==="Enter"&&d()},className:"flex-1 px-4 py-2 border border-gray-600 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all bg-gray-700 text-white",placeholder:"Введите фамилию сварщика"}),a("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Добавить сварщика"}),a("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors whitespace-nowrap",children:"Импорт-Экспорт"})]})}),a("div",{className:"flex-1 pt-20 pb-24 px-4 max-w-6xl mx-auto w-full",children:e.length===0?a("div",{className:"text-center py-8 text-gray-400",children:[a("div",{className:"text-2xl mb-2",children:"📋"}),a("p",{className:"text-lg font-medium mb-1",children:"Нет добавленных сварщиков"}),a("p",{children:"Добавьте первого сварщика с помощью формы выше"})]}):a("div",{children:[a("div",{className:"mb-4",children:a("h2",{className:"text-xl font-semibold text-white",children:["Список сварщиков (",e.length,")"]})}),a("div",{className:"space-y-3",children:e.map(s=>a(j,{href:`/welder/${s.id}`,className:"block no-underline",children:a("div",{className:"bg-gray-800 p-4 rounded-2xl border border-gray-700 shadow-sm hover:shadow-lg hover:border-blue-500 hover:-translate-y-0.5 transition-all duration-300 cursor-pointer",children:a("div",{className:"flex items-center gap-3",children:[a("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white font-semibold text-lg",children:s.name.charAt(0).toUpperCase()}),a("span",{className:"text-lg font-semibold text-white",children:s.name})]})})},s.id))})]})}),a("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800/95 backdrop-blur-lg shadow-md z-50 border-t border-gray-700 px-4 py-3",children:a("div",{className:"max-w-6xl mx-auto flex justify-around gap-3",children:[a(j,{href:"/summary",className:"flex-1 no-underline",children:a("button",{className:"w-full px-4 py-2 bg-transparent text-white rounded-xl font-medium hover:bg-gray-700 transition-colors",children:"📊 Сводка"})}),a(j,{href:"/norms",className:"flex-1 no-underline",children:a("button",{className:"w-full px-4 py-2 bg-transparent text-white rounded-xl font-medium hover:bg-gray-700 transition-colors",children:"⚙️ Нормы"})})]})}),i&&a(nr,{onClose:()=>o(!1)})]})}function ir(){const[e,t]=C([]),[r,n]=C("");Z(()=>{i()},[]);const i=async()=>{try{const u=await D.getAllNorms();console.log("Загружено норм:",u),t(u)}catch(u){console.error("Ошибка загрузки норм:",u)}},o=async()=>{if(console.log("Добавление артикула:",r),r.trim()===""){console.log("Пустой артикул");return}if(e.find(s=>s.article.toLowerCase()===r.trim().toLowerCase())){alert("Такой артикул уже существует в списке норм");return}try{console.log("Сохранение в БД..."),await D.addNorm(r.trim()),console.log("Артикул сохранен"),n(""),await i(),console.log("Список обновлен")}catch(s){console.error("Ошибка добавления нормы:",s),alert("Ошибка при добавлении нормы: "+s.message)}},c=u=>{u.key==="Enter"&&o()},d=async u=>{if(confirm("Удалить этот артикул из базы?"))try{console.log("Удаление артикула с id:",u),await i()}catch(s){console.error("Ошибка удаления нормы:",s)}};return a("div",{className:"min-h-screen bg-gray-900 p-4",children:[a("div",{className:"mb-6",children:a(j,{href:"/",children:a("button",{className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← На главную"})})}),a("h1",{className:"text-2xl font-bold text-white mb-6",children:"База артикулов (Нормы)"}),a("div",{className:"bg-gray-800 rounded-lg shadow-sm border border-gray-700 p-4 mb-6",children:a("div",{className:"flex gap-3 items-center",children:[a("input",{type:"text",value:r,onInput:u=>n(u.target.value),onKeyPress:c,className:"flex-1 px-4 py-2 border border-gray-600 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all bg-gray-700 text-white",placeholder:"Введите артикул (например, хт637)"}),a("button",{onClick:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Добавить"})]})}),a("div",{className:"bg-gray-800 rounded-lg shadow-sm border border-gray-700 overflow-hidden",children:[a("div",{className:"bg-gray-700 px-4 py-3 border-b border-gray-600",children:a("h2",{className:"text-lg font-semibold text-white",children:["Список артикулов ",e.length>0&&`(${e.length})`]})}),e.length===0?a("div",{className:"p-8 text-center text-gray-400",children:[a("div",{className:"text-3xl mb-2",children:"📋"}),a("p",{className:"text-lg font-medium mb-1",children:"Нет добавленных артикулов"}),a("p",{children:"Добавьте первый артикул с помощью формы выше"})]}):a("div",{className:"divide-y divide-gray-700",children:e.map((u,s)=>a("div",{className:"px-4 py-3 hover:bg-gray-750 transition-colors",children:a("div",{className:"flex justify-between items-center",children:[a("span",{className:"text-lg font-medium text-white",children:u.article}),a("button",{onClick:()=>d(u.id),className:"px-3 py-1 text-red-400 hover:bg-red-900 hover:text-red-300 rounded-lg transition-colors",title:"Удалить артикул",children:"🗑️"})]})},u.id))})]}),a("div",{className:"mt-4 text-sm text-gray-500 text-center",children:"💡 Этот список помогает избегать опечаток при вводе артикулов"})]})}function mt(e){const t={};return e.forEach(r=>{const n=new Date(r.date),i=`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}`;t[i]||(t[i]={month:n.toLocaleString("ru",{month:"long",year:"numeric"}),monthKey:i,records:[]}),t[i].records.push(r)}),Object.keys(t).sort((r,n)=>n.localeCompare(r)).map(r=>t[r])}class ar{constructor(){this.events={}}on(t,r){this.events[t]||(this.events[t]=[]),this.events[t].push(r)}off(t,r){this.events[t]&&(this.events[t]=this.events[t].filter(n=>n!==r))}emit(t,r){this.events[t]&&this.events[t].forEach(n=>{n(r)})}}const oe=new ar;function sr(){const[e,t]=C([]);Z(()=>(r(),oe.on("recordsUpdated",r),()=>{oe.off("recordsUpdated",r)}),[]);const r=async()=>{try{const n=await D.getAllWelders();let i=[];for(const u of n){const h=(await D.getRecordsByWelder(u.id)).map(l=>({...l,welderName:u.name}));i=[...i,...h]}const o=i.sort((u,s)=>new Date(s.date)-new Date(u.date)),d=mt(o).map(u=>{const s={};u.records.forEach(l=>{s[l.article]||(s[l.article]={article:l.article,totalQuantity:0,welderDetails:{}}),s[l.article].totalQuantity=Math.round((s[l.article].totalQuantity+l.quantity)*100)/100,s[l.article].welderDetails[l.welderName]||(s[l.article].welderDetails[l.welderName]=0),s[l.article].welderDetails[l.welderName]=Math.round((s[l.article].welderDetails[l.welderName]+l.quantity)*100)/100});const h=Object.values(s);return{...u,articles:h}});t(d)}catch(n){console.error("Ошибка загрузки данных для сводки:",n)}};return a("div",{className:"min-h-screen bg-gray-900 p-4",children:[a("div",{className:"mb-6",children:a(j,{href:"/",children:a("button",{className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← На главную"})})}),a("h1",{className:"text-2xl font-bold text-white mb-6",children:"Сводка по всем сварщикам"}),e.length===0?a("div",{className:"bg-gray-800 rounded-lg shadow-sm border border-gray-700 p-8 text-center text-gray-400",children:[a("div",{className:"text-3xl mb-3",children:"📊"}),a("p",{className:"text-lg font-medium mb-2",children:"Нет данных для сводки"}),a("p",{children:"Добавьте записи в карточках сварщиков"})]}):a("div",{className:"space-y-6",children:e.map((n,i)=>a("div",{className:"bg-gray-800 rounded-lg shadow-sm border border-gray-700 overflow-hidden",children:[a("div",{className:"bg-gray-700 px-4 py-3 border-b border-gray-600",children:a("h3",{className:"text-lg font-semibold text-white",children:n.month})}),a("div",{className:"divide-y divide-gray-700",children:n.articles.map((o,c)=>a("div",{className:"px-4 py-3",children:[a("div",{className:"flex justify-between items-center mb-2",children:[a("span",{className:"text-lg font-medium text-white",children:o.article}),a("span",{className:"text-xl font-bold text-blue-400",children:[o.totalQuantity.toFixed(2)," шт."]})]}),a("div",{className:"flex flex-wrap gap-2",children:Object.entries(o.welderDetails).map(([d,u])=>a("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-900 text-blue-300",children:[d,": ",u.toFixed(2)," шт."]},d))})]},c))})]},i))})]})}const lr=({record:e,onClose:t,onUpdate:r})=>{const[n,i]=C([]),[o,c]=C("");Z(()=>{e&&(d(),c(e.quantity||""))},[e]);const d=async()=>{try{const s=await D.getHistoryByRecord(e.id);i(s)}catch(s){console.error("Ошибка загрузки истории:",s)}},u=async()=>{if(!(o===""||parseInt(o)===e.quantity))try{const s=e.quantity;await D.updateRecord(e.id,parseInt(o)),await D.addHistoryRecord(e.id,s,parseInt(o)),r(),t()}catch(s){console.error("Ошибка обновления количества:",s)}};return e?a("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:a("div",{className:"bg-gray-800 rounded-2xl max-w-md w-full max-h-[80vh] overflow-hidden border border-gray-700",children:[a("div",{className:"p-6 border-b border-gray-700",children:[a("div",{className:"flex justify-between items-center",children:[a("h3",{className:"text-lg font-semibold text-white",children:"История изменений"}),a("button",{onClick:t,className:"text-gray-400 hover:text-white",children:"✕"})]}),a("p",{className:"text-gray-300 mt-1",children:["Артикул: ",e.article]})]}),a("div",{className:"p-6 border-b border-gray-700",children:a("div",{className:"flex gap-3 items-center",children:[a("input",{type:"number",value:o,onInput:s=>c(s.target.value),className:"flex-1 px-3 py-2 border border-gray-600 rounded-lg bg-gray-700 text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Новое количество"}),a("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Обновить"})]})}),a("div",{className:"max-h-64 overflow-y-auto",children:[a("div",{className:"p-4 bg-gray-700 border-b border-gray-600",children:a("span",{className:"text-sm font-medium text-gray-300",children:["Текущее: ",e.quantity," шт."]})}),n.length===0?a("div",{className:"p-4 text-center text-gray-400",children:"История изменений отсутствует"}):a("div",{className:"divide-y divide-gray-700",children:n.map((s,h)=>a("div",{className:"p-4 hover:bg-gray-750 transition-colors",children:[a("div",{className:"flex justify-between items-center",children:[a("span",{className:"text-sm text-gray-300",children:new Date(s.date).toLocaleDateString("ru-RU")}),a("span",{className:"text-sm font-medium text-white",children:[s.oldQuantity," → ",s.newQuantity," шт."]})]}),a("div",{className:"text-xs text-gray-400 mt-1",children:new Date(s.date).toLocaleTimeString("ru-RU")})]},h))})]}),a("div",{className:"p-4 bg-gray-700 border-t border-gray-600",children:a("button",{onClick:t,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition-colors",children:"Закрыть"})})]})}):null};function cr({id:e}){const[t,r]=C(null),[n,i]=C(""),[o,c]=C(""),[d,u]=C([]),[s,h]=C([]),[l,m]=C(null),[_,x]=C(!1),S=me(null),w=me({x:0,y:0}),y=500,p=(f,g)=>{if(f.type==="mousedown"&&f.button===2)return;const b=f.touches?f.touches[0]:f;w.current={x:b.clientX,y:b.clientY},S.current=setTimeout(()=>{m(g.records[0]),x(!0)},y)},$=()=>{clearTimeout(S.current),S.current=null},M=f=>{if(!S.current)return;const g=f.touches[0],b=Math.abs(g.clientX-w.current.x),N=Math.abs(g.clientY-w.current.y);(b>10||N>10)&&$()};Z(()=>{H(),R()},[e]);const H=async()=>{try{const f=await D.getWelder(parseInt(e,10));r(f)}catch(f){console.error("Ошибка загрузки сварщика:",f)}},R=async()=>{try{const g=(await D.getRecordsByWelder(parseInt(e,10))).sort((b,N)=>new Date(N.date)-new Date(b.date));u(g),h(mt(g))}catch(f){console.error("Ошибка загрузки записей:",f)}},q=async()=>{if(!(!n.trim()||!o.trim()))try{const f=Math.round(parseFloat(o.replace(",","."))*100)/100;if(Number.isNaN(f))return alert("Введите корректное количество");const g=new Date,b=`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,"0")}`,N=d.find(W=>{const E=new Date(W.date),pt=`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`;return W.article===n.trim()&&pt===b});if(N){const W=N.quantity,E=Math.round((W+f)*100)/100;await D.updateRecord(N.id,E),await D.addHistoryRecord(N.id,W,E)}else await D.addRecord(parseInt(e,10),n.trim(),f);i(""),c(""),await R(),oe.emit("recordsUpdated")}catch(f){console.error(f),alert("Ошибка при добавлении записи")}},O=f=>{f.key==="Enter"&&q()},L=f=>{i(f),setTimeout(()=>document.querySelector('input[type="text"]')?.focus(),100)},K=f=>{const g={};return f.forEach(b=>{if(!g[b.article])g[b.article]={article:b.article,quantity:b.quantity,records:[b],latestDate:new Date(b.date)};else{g[b.article].quantity=Math.round((g[b.article].quantity+b.quantity)*100)/100,g[b.article].records.push(b);const N=new Date(b.date);N>g[b.article].latestDate&&(g[b.article].latestDate=N)}}),Object.values(g).sort((b,N)=>N.latestDate-b.latestDate)};return t?a("div",{className:"min-h-screen bg-gray-900 p-4",children:[a("div",{className:"mb-6",children:[a(j,{href:"/",className:"inline-block mb-4",children:a("button",{className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"← На главную"})}),a("div",{className:"flex items-center gap-3",children:[a("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center text-white font-semibold text-xl",children:t.name.charAt(0).toUpperCase()}),a("h1",{className:"text-2xl font-bold text-white",children:t.name})]})]}),a("div",{className:"bg-gray-800 rounded-lg shadow-sm border border-gray-700 p-4 mb-6",children:a("div",{className:"flex gap-3 items-center flex-wrap",children:[a("input",{type:"text",value:n,onInput:f=>i(f.target.value),placeholder:"Артикул (например, хт637)",className:"flex-1 min-w-[200px] px-4 py-2 border border-gray-600 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all bg-gray-700 text-white"}),a("input",{type:"text",value:o,onInput:f=>c(f.target.value.replace(",",".")),onKeyPress:O,placeholder:"Кол-во",className:"w-32 px-4 py-2 border border-gray-600 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all bg-gray-700 text-white"}),a("button",{onClick:q,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Добавить запись"})]})}),s.length===0?a("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-8 text-center text-gray-400",children:[a("div",{className:"text-3xl mb-3",children:"📋"}),a("p",{className:"text-lg font-medium mb-2",children:"Записи появятся здесь"}),a("p",{children:"Добавьте первую запись с помощью формы выше"})]}):a("div",{className:"space-y-6",children:s.map((f,g)=>{const b=K(f.records);return a("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[a("div",{className:"bg-gray-700 px-4 py-3 border-b border-gray-600",children:a("h3",{className:"text-lg font-semibold text-white",children:f.month})}),a("div",{className:"divide-y divide-gray-700",children:b.map((N,W)=>a("div",{className:"px-4 py-3 hover:bg-gray-750 transition-colors cursor-pointer select-none",onClick:()=>L(N.article),onContextMenu:E=>{E.preventDefault(),m(N.records[0]),x(!0)},onTouchStart:E=>p(E,N),onTouchEnd:$,onTouchMove:M,onTouchCancel:$,onMouseDown:E=>p(E,N),onMouseUp:$,onMouseLeave:$,children:a("div",{className:"flex justify-between items-center",children:[a("div",{children:[a("span",{className:"text-lg font-medium text-white block",children:N.article}),a("span",{className:"text-sm text-gray-400",children:[N.records.length," записей"]})]}),a("span",{className:"text-xl font-bold text-blue-400",children:[N.quantity.toFixed(2)," шт."]})]})},W))})]},g)})}),_&&a(lr,{record:l,onClose:()=>{x(!1),m(null)},onUpdate:()=>{R(),oe.emit("recordsUpdated")}})]}):a("div",{className:"min-h-screen bg-gray-900 p-4",children:[a(j,{href:"/deepsya/",className:"inline-block mb-4",children:a("button",{className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"← На главную"})}),a("div",{className:"text-white",children:"Загрузка..."})]})}function dr(){return a(ht,{children:[a(or,{path:"/"}),a(ir,{path:"/norms"}),a(sr,{path:"/summary"}),a(cr,{path:"/welder/:id"})]})}wt(a(dr,{}),document.getElementById("app"));
